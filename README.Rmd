---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  warning = FALSE,
  message = FALSE
)
```

# reclamer

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![R-CMD-check](https://github.com/favstats/reclamer/workflows/R-CMD-check/badge.svg)](https://github.com/favstats/reclamer/actions)
<!-- badges: end -->

**Comprehensive Dutch Political Advertising Transparency Data Collection**

The `reclamer` package provides unified access to Dutch political advertising transparency data from multiple sources, including politiekeReclame.nl, DPG Media, and Ster. It automatically handles data collection, version detection, PDF parsing, and provides clean, structured outputs for analysis.

## 📦 Installation

You can install the development version of reclamer from GitHub:

``` r
# install.packages("devtools")
devtools::install_github("favstats/reclamer")
```

## 🚀 Quick Start

### Basic Usage

```{r basic-usage, eval = FALSE}
library(reclamer)

# PolitiekeReclame.nl API (default)
ads <- fetch_ads(source = "politiekereclame", query = "verkiezingen")
print(ads)

# DPG Media API
dpg_ads <- fetch_ads(source = "dpgmedia", period = "PAST_7_DAYS")
print(dpg_ads)

# Ster transparency scraper
ster_data <- scrape_ster_transparency()
print(ster_data)
```

### Advanced Data Collection

```{r advanced-usage, eval = FALSE}
# Auto-pagination for complete datasets
all_ads <- fetch_ads(source = "politiekereclame", query = "verkiezingen", all = TRUE, verbose = TRUE)

# Different time periods from DPG Media
recent_ads <- fetch_ads(source = "dpgmedia", period = "PAST_7_DAYS")
monthly_ads <- fetch_ads(source = "dpgmedia", period = "PAST_30_DAYS")
yearly_ads <- fetch_ads(source = "dpgmedia", period = "PAST_YEAR")

# Channel-specific data
print_ads <- fetch_ads(source = "dpgmedia", channel = "PRINT")
digital_ads <- fetch_ads(source = "dpgmedia", channel = "DIGITAL")
```

## 📊 Data Sources

### 1. PolitiekeReclame.nl API

Official transparency statements from the voluntary Dutch political advertising registry.

```{r politiekereclame-example, eval = FALSE}
# Search for specific terms
election_ads <- fetch_ads(query = "verkiezingen")

# Filter by theme
tk2025_ads <- fetch_ads(theme = "Tweede Kamerverkiezingen 2025")

# Get all results with auto-pagination
all_statements <- fetch_ads(all = TRUE, max_pages = 10, verbose = TRUE)
```

### 2. DPG Media API

Political advertising data from major Dutch media company (AD, Het Parool, etc.).

```{r dpgmedia-example, eval = FALSE}
# Recent campaigns
recent_campaigns <- fetch_ads(
  source = "dpgmedia", 
  period = "PAST_7_DAYS",
  verbose = TRUE
)

# Print advertising only
print_campaigns <- fetch_ads(
  source = "dpgmedia",
  channel = "PRINT", 
  period = "PAST_30_DAYS"
)

# Digital campaigns
digital_campaigns <- fetch_ads(
  source = "dpgmedia",
  channel = "DIGITAL",
  period = "PAST_YEAR"
)
```

### 3. Ster Transparency Scraper

Comprehensive scraping of public broadcaster transparency statements

```{r ster-example, eval = FALSE}
# Scrape and download all transparency PDFs with real parsing
ster_data <- scrape_ster_transparency(
  download_dir = "ster_pdfs",
  parse_pdfs = TRUE,
  extract_tables = TRUE,
  extract_text = TRUE,
  verbose = TRUE
)

# Access downloaded files
downloaded_files <- ster_data$file_paths
print(paste("Downloaded", length(downloaded_files), "PDFs"))

# View unified dataset
ster_data

```


## 📝 Contributing

Contributions are welcome! Please feel free to submit issues, feature requests, or pull requests.

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.

## 🙏 Acknowledgments

- **PolitiekeReclame.nl** for providing the transparency API
- **DPG Media** for their advertising transparency data
- **Ster** for public broadcaster transparency statements
- The R community for excellent packages that make this possible

---

**Built with ❤️ for Dutch political transparency**
